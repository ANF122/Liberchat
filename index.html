<html><head><base href="https://liberchat.org/"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Liberchat - Communication Libre et Anarchiste</title>
<style>
:root {
    --primary-color: #ff4500;
    --secondary-color: #1a1a1a;
    --text-color: #f0f0f0;
    --accent-color: #ffd700;
}

body {
    font-family: 'Courier New', monospace;
    line-height: 1.6;
    color: var(--text-color);
    background-color: var(--secondary-color);
    margin: 0;
    padding: 0;
    overflow-x: hidden;
}

.container {
    width: 90%;
    max-width: 1200px;
    margin: auto;
    overflow: hidden;
    padding: 20px;
}

header {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    padding: 30px 0;
    position: relative;
    overflow: hidden;
}

header::before {
    content: "☭";
    position: absolute;
    font-size: 200px;
    opacity: 0.1;
    top: -50px;
    left: -50px;
    transform: rotate(-45deg);
}

header h1 {
    font-size: 3em;
    margin-bottom: 10px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
}

.highlight {
    color: var(--accent-color);
}

.cta-button {
    display: inline-block;
    background: var(--accent-color);
    color: var(--secondary-color);
    padding: 12px 24px;
    margin-top: 20px;
    text-decoration: none;
    border-radius: 50px;
    font-weight: bold;
    text-transform: uppercase;
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.cta-button:hover {
    background: transparent;
    color: var(--accent-color);
    border-color: var(--accent-color);
}

.features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 30px;
    margin-top: 50px;
}

.feature-box {
    background: rgba(255,255,255,0.1);
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
    position: relative;
    overflow: hidden;
}

.feature-box::before {
    content: "";
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.feature-box:hover {
    transform: translateY(-10px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
}

.feature-box:hover::before {
    opacity: 1;
}

.feature-box h3 {
    color: var(--accent-color);
    margin-top: 0;
    font-size: 1.5em;
}

#chat-container {
    display: none;
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 350px;
    height: 500px;
    background: var(--secondary-color);
    border: 2px solid var(--primary-color);
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 0 20px rgba(255,69,0,0.3);
}

#chat-header {
    background: var(--primary-color);
    color: var(--text-color);
    padding: 10px;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#chat-messages {
    height: 380px;
    overflow-y: scroll;
    padding: 15px;
    scrollbar-width: thin;
    scrollbar-color: var(--primary-color) var(--secondary-color);
}

#chat-messages::-webkit-scrollbar {
    width: 8px;
}

#chat-messages::-webkit-scrollbar-track {
    background: var(--secondary-color);
}

#chat-messages::-webkit-scrollbar-thumb {
    background-color: var(--primary-color);
    border-radius: 20px;
    border: 3px solid var(--secondary-color);
}

#chat-input {
    display: flex;
    padding: 10px;
    background: rgba(255,255,255,0.1);
}

#message-input {
    flex-grow: 1;
    padding: 10px;
    border: none;
    border-radius: 25px;
    background: rgba(255,255,255,0.2);
    color: var(--text-color);
}

#send-button {
    background: var(--primary-color);
    color: var(--text-color);
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    margin-left: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

#send-button:hover {
    background: var(--accent-color);
}

.message {
    margin-bottom: 15px;
    padding: 10px;
    border-radius: 15px;
    max-width: 80%;
    word-wrap: break-word;
}

.user-message {
    background: var(--primary-color);
    color: var(--text-color);
    align-self: flex-end;
    margin-left: auto;
}

.system-message {
    background: rgba(255,255,255,0.1);
    font-style: italic;
}

.vote-button {
    background: var(--accent-color);
    color: var(--secondary-color);
    border: none;
    padding: 5px 10px;
    font-size: 0.8em;
    cursor: pointer;
    margin-left: 10px;
    border-radius: 15px;
    transition: background-color 0.3s ease;
}

.vote-button:hover {
    background: var(--primary-color);
    color: var(--text-color);
}

#customization-panel {
    position: fixed;
    top: 50%;
    left: -300px;
    transform: translateY(-50%);
    width: 300px;
    background: var(--secondary-color);
    padding: 20px;
    box-shadow: 0 0 20px rgba(255,69,0,0.3);
    transition: left 0.3s ease;
    border-radius: 0 15px 15px 0;
    z-index: 1000;
}

#customization-panel.open {
    left: 0;
}

#customization-toggle {
    position: absolute;
    right: -40px;
    top: 50%;
    transform: translateY(-50%) rotate(-90deg);
    background: var(--primary-color);
    color: var(--text-color);
    padding: 10px 20px;
    cursor: pointer;
    border-radius: 0 0 15px 15px;
    font-weight: bold;
    text-transform: uppercase;
}

.anarchist-mascot {
    position: fixed;
    bottom: 20px;
    left: 20px;
    width: 100px;
    height: 100px;
    cursor: pointer;
    transition: transform 0.3s ease;
}

.anarchist-mascot:hover {
    transform: scale(1.1);
}

@keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0px); }
}

.anarchist-mascot {
    animation: float 3s ease-in-out infinite;
}

#voice-chat-container {
    position: fixed;
    top: 20px;
    right: 20px;
    width: 300px;
    background: var(--secondary-color);
    border: 2px solid var(--primary-color);
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 0 20px rgba(255,69,0,0.3);
}

#voice-chat-header {
    background: var(--primary-color);
    color: var(--text-color);
    padding: 10px;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#voice-chat-participants {
    height: 200px;
    overflow-y: auto;
    padding: 10px;
}

#voice-controls, #voice-chat-management {
    display: flex;
    justify-content: space-around;
    padding: 10px;
    background: rgba(255,255,255,0.1);
}

#voice-controls button, #voice-chat-management button, #leave-voice-chat {
    background: var(--accent-color);
    color: var(--secondary-color);
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

#voice-controls button:hover, #voice-chat-management button:hover, #leave-voice-chat:hover {
    background: var(--primary-color);
    color: var(--text-color);
}

#voice-channel-select {
    width: 100%;
    padding: 5px;
    margin-top: 10px;
    background: rgba(255,255,255,0.2);
    color: var(--text-color);
    border: none;
    border-radius: 5px;
}

@media(max-width: 768px) {
    .feature-box {
        padding: 20px;
    }
    
    #chat-container {
        width: 90%;
        height: 60vh;
        left: 5%;
        right: 5%;
    }
    
    .anarchist-mascot {
        width: 60px;
        height: 60px;
    }
}
</style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Bienvenue sur <span class="highlight">Liberchat</span></h1>
            <p>Libérez votre communication avec une plateforme anarchiste, libre et sans compromis.</p>
            <a href="#" class="cta-button" id="join-button">Rejoignez la révolution</a>
        </div>
    </header>

    <div class="container">
        <section class="features">
            <div class="feature-box" id="auto-moderation">
                <h3>Auto-Modération Collective</h3>
                <p>Façonnez votre communauté avec une modération décentralisée et participative.</p>
            </div>
            <div class="feature-box" id="direct-democracy">
                <h3>Démocratie Directe</h3>
                <p>Chaque voix compte. Votez, décidez, et construisez ensemble.</p>
            </div>
            <div class="feature-box" id="total-customization">
                <h3>Personnalisation Totale</h3>
                <p>Votre espace, vos règles. Adaptez chaque aspect à votre vision.</p>
            </div>
        </section>
    </div>

    <div id="chat-container">
        <div id="chat-header">
            <span>Liberchat</span>
            <select id="language-select">
                <option value="fr">Français</option>
                <option value="en">English</option>
                <option value="es">Español</option>
                <option value="de">Deutsch</option>
            </select>
        </div>
        <div id="chat-messages"></div>
        <div id="chat-input">
            <input type="text" id="message-input" placeholder="Exprimez-vous librement...">
            <button id="send-button">➤</button>
        </div>
    </div>

    <div id="voice-chat-container" style="display: none;">
        <div id="voice-chat-header">
            <span>Chat Vocal Liberchat</span>
            <button id="leave-voice-chat">Quitter</button>
        </div>
        <div id="voice-chat-participants"></div>
        <div id="voice-controls">
            <button id="mute-toggle">Muet</button>
            <button id="deafen-toggle">Sourd</button>
        </div>
        <div id="voice-chat-management">
            <button id="create-voice-channel">Créer un canal</button>
            <select id="voice-channel-select">
                <option value="">Sélectionner un canal</option>
            </select>
        </div>
    </div>

    <div id="poll-container" style="display: none;">
        <h3>Sondage</h3>
        <p id="poll-question"></p>
        <div id="poll-options"></div>
        <button id="submit-vote">Voter</button>
    </div>

    <div id="ban-vote-container" style="display: none;">
        <h3>Vote pour bannir un utilisateur</h3>
        <p id="ban-user"></p>
        <button id="vote-yes">Oui</button>
        <button id="vote-no">Non</button>
    </div>

    <div id="customization-panel">
        <div id="customization-toggle">Personnaliser</div>
        <h3>Façonnez votre expérience</h3>
        <label>
            Couleur principale:
            <input type="color" id="primary-color" value="#ff4500">
        </label>
        <label>
            Couleur secondaire:
            <input type="color" id="secondary-color" value="#1a1a1a">
        </label>
        <label>
            Taille de police:
            <input type="range" id="font-size" min="12" max="24" value="16">
        </label>
        <label>
            Mode incognito:
            <input type="checkbox" id="incognito-mode">
        </label>
    </div>

    <svg class="anarchist-mascot" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="45" fill="#000"/>
        <circle cx="50" cy="50" r="40" fill="#ff4500"/>
        <path d="M50 20 L20 80 H80 Z" fill="#000"/>
        <circle cx="35" cy="40" r="5" fill="#000"/>
        <circle cx="65" cy="40" r="5" fill="#000"/>
        <path d="M30 60 Q50 70 70 60" stroke="#000" stroke-width="3" fill="none"/>
    </svg>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.3.2/socket.io.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', (event) => {
        const joinButton = document.getElementById('join-button');
        const chatContainer = document.getElementById('chat-container');
        const voiceChatContainer = document.getElementById('voice-chat-container');
        const chatMessages = document.getElementById('chat-messages');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const autoModerationBox = document.getElementById('auto-moderation');
        const directDemocracyBox = document.getElementById('direct-democracy');
        const totalCustomizationBox = document.getElementById('total-customization');
        const customizationPanel = document.getElementById('customization-panel');
        const customizationToggle = document.getElementById('customization-toggle');
        const languageSelect = document.getElementById('language-select');
        const anarchistMascot = document.querySelector('.anarchist-mascot');

        let activeUsers = new Set();
        let username = '';
        let currentLanguage = 'fr';
        let banVotes = {};
        const requiredBanPercentage = 0.75;

        // Voice chat functionality
        const leaveVoiceChatButton = document.getElementById('leave-voice-chat');
        const muteToggleButton = document.getElementById('mute-toggle');
        const deafenToggleButton = document.getElementById('deafen-toggle');
        const createVoiceChannelButton = document.getElementById('create-voice-channel');
        const voiceChannelSelect = document.getElementById('voice-channel-select');
        const voiceChatParticipants = document.getElementById('voice-chat-participants');

        let isMuted = false;
        let isDeafened = false;
        let currentVoiceChannel = null;
        let voiceChannels = [];

        // Simulated socket connection
        const socket = {
            emit: (event, data) => {
                console.log(`Emitted ${event}:`, data);
                // Simulate server response
                setTimeout(() => {
                    if (event === 'chat message') {
                        addMessage(data, 'user');
                        // Simulate auto-moderation
                        if (data.toLowerCase().includes('censure')) {
                            addMessage("Message signalé pour examen par la communauté.", 'system');
                        }
                    }
                }, 100);
            }
        };

        joinButton.addEventListener('click', (e) => {
            e.preventDefault();
            username = prompt("Entrez votre pseudonyme révolutionnaire:");
            if (username) {
                chatContainer.style.display = 'block';
                voiceChatContainer.style.display = 'block';
                addMessage('Bienvenue dans la résistance numérique, camarade!', 'system');
                activeUsers.add(username);
                addMessage("Nouveau système d'auto-modération IA anarchiste activé. L'IA analysera les messages selon les règles définies par la communauté.", 'system');
            }
        });

        leaveVoiceChatButton.addEventListener('click', () => {
            leaveVoiceChannel();
            voiceChatContainer.style.display = 'none';
            addMessage('Vous avez quitté le chat vocal.', 'system');
        });

        muteToggleButton.addEventListener('click', () => {
            isMuted = !isMuted;
            muteToggleButton.textContent = isMuted ? 'Non muet' : 'Muet';
            addMessage(`Vous êtes maintenant ${isMuted ? 'muet' : 'non muet'}.`, 'system');
        });

        deafenToggleButton.addEventListener('click', () => {
            isDeafened = !isDeafened;
            deafenToggleButton.textContent = isDeafened ? 'Non sourd' : 'Sourd';
            addMessage(`Vous êtes maintenant ${isDeafened ? 'sourd' : 'non sourd'}.`, 'system');
        });

        createVoiceChannelButton.addEventListener('click', () => {
            const channelName = prompt("Entrez le nom du nouveau canal vocal:");
            if (channelName) {
                createVoiceChannel(channelName);
            }
        });

        voiceChannelSelect.addEventListener('change', (e) => {
            const selectedChannel = e.target.value;
            if (selectedChannel) {
                joinVoiceChannel(selectedChannel);
            } else {
                leaveVoiceChannel();
            }
        });

        sendButton.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        function aiModerate(message) {
            const lowercaseMessage = message.toLowerCase();
            const forbiddenWords = ['censure', 'autorité', 'hiérarchie'];
            const suspiciousWords = ['spam', 'publicité', 'arnaque'];
            
            if (forbiddenWords.some(word => lowercaseMessage.includes(word))) {
                return {
                    action: 'block',
                    reason: 'Contenu potentiellement autoritaire détecté'
                };
            } else if (suspiciousWords.some(word => lowercaseMessage.includes(word))) {
                return {
                    action: 'flag',
                    reason: 'Contenu potentiellement problématique détecté'
                };
            }
            
            if (message.length > 500) {
                return {
                    action: 'suggest',
                    reason: 'Message long détecté. Pensez à le diviser en plusieurs parties pour faciliter la lecture.'
                };
            }
            
            return {
                action: 'allow',
                reason: 'Aucun problème détecté'
            };
        }

        function sendMessage() {
            const message = messageInput.value.trim();
            if (message && username) {
                if (message.startsWith('/poll ')) {
                    createPoll(message.slice(6));
                } else if (message.startsWith('/ban ')) {
                    initiateBanVote(message.slice(5));
                } else {
                    const moderationResult = aiModerate(message);
                    switch (moderationResult.action) {
                        case 'block':
                            addMessage(`Votre message a été bloqué. Raison : ${moderationResult.reason}`, 'system');
                            break;
                        case 'flag':
                            socket.emit('chat message', `${username}: ${message}`);
                            addMessage(`${username}: ${message}`, 'user');
                            addMessage(`Message signalé pour examen par la communauté. Raison : ${moderationResult.reason}`, 'system');
                            break;
                        case 'suggest':
                            socket.emit('chat message', `${username}: ${message}`);
                            addMessage(`${username}: ${message}`, 'user');
                            addMessage(`Suggestion de l'IA : ${moderationResult.reason}`, 'system');
                            break;
                        default:
                            socket.emit('chat message', `${username}: ${message}`);
                            addMessage(`${username}: ${message}`, 'user');
                    }
                }
                messageInput.value = '';
            }
        }

        function createPoll(pollData) {
            const [question, ...options] = pollData.split(',').map(item => item.trim());
            const pollContainer = document.getElementById('poll-container');
            const pollQuestion = document.getElementById('poll-question');
            const pollOptions = document.getElementById('poll-options');
            
            pollQuestion.textContent = question;
            pollOptions.innerHTML = '';
            options.forEach((option, index) => {
                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = 'poll-option';
                radio.value = index;
                radio.id = `option-${index}`;
                
                const label = document.createElement('label');
                label.htmlFor = `option-${index}`;
                label.textContent = option;
                
                pollOptions.appendChild(radio);
                pollOptions.appendChild(label);
                pollOptions.appendChild(document.createElement('br'));
            });
            
            pollContainer.style.display = 'block';
            addMessage("Un nouveau sondage a été créé!", 'system');
        }

        function initiateBanVote(userToBan) {
            if (userToBan === username) {
                addMessage("Vous ne pouvez pas initier un vote pour vous bannir vous-même.", 'system');
                return;
            }
            
            if (!activeUsers.has(userToBan)) {
                addMessage(`L'utilisateur ${userToBan} n'est pas actif dans le chat.`, 'system');
                return;
            }
            
            banVotes[userToBan] = { yes: 0, no: 0, voters: new Set() };
            const banVoteContainer = document.getElementById('ban-vote-container');
            const banUserElement = document.getElementById('ban-user');
            
            banUserElement.textContent = `Voulez-vous bannir ${userToBan} ?`;
            banVoteContainer.style.display = 'block';
            addMessage(`Un vote pour bannir ${userToBan} a été initié. Tous les membres doivent voter.`, 'system');
        }

        function submitBanVote(vote) {
            const userToBan = document.getElementById('ban-user').textContent.split(' ')[3];
            if (banVotes[userToBan].voters.has(username)) {
                addMessage("Vous avez déjà voté pour ce bannissement.", 'system');
                return;
            }
            
            banVotes[userToBan][vote]++;
            banVotes[userToBan].voters.add(username);
            
            if (banVotes[userToBan].voters.size === activeUsers.size) {
                finalizeBanVote(userToBan);
            }
        }

        function finalizeBanVote(userToBan) {
            const totalVotes = banVotes[userToBan].yes + banVotes[userToBan].no;
            const yesPercentage = banVotes[userToBan].yes / totalVotes;
            
            if (yesPercentage >= requiredBanPercentage) {
                addMessage(`${userToBan} a été banni du chat par vote de la communauté.`, 'system');
                activeUsers.delete(userToBan);
            } else {
                addMessage(`Le vote pour bannir ${userToBan} n'a pas atteint la majorité requise.`, 'system');
            }
            
            delete banVotes[userToBan];
            document.getElementById('ban-vote-container').style.display = 'none';
        }

        function addMessage(message, type) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', `${type}-message`);
            messageElement.textContent = message;
            
            if (type === 'user') {
                const voteButton = document.createElement('button');
                voteButton.textContent = '✓';
                voteButton.title = 'Approuver ce message';
                voteButton.classList.add('vote-button');
                voteButton.addEventListener('click', () => {
                    voteButton.textContent = '✓✓';
                    voteButton.disabled = true;
                });
                messageElement.appendChild(voteButton);
            }
            
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        autoModerationBox.addEventListener('click', () => {
            addMessage("Info: L'auto-modération est entre vos mains. Utilisez votre pouvoir avec sagesse.", 'system');
        });

        directDemocracyBox.addEventListener('click', () => {
            addMessage("Alerte: Un vote crucial approche. Préparez-vous à faire entendre votre voix!", 'system');
        });

        totalCustomizationBox.addEventListener('click', () => {
            customizationPanel.classList.toggle('open');
        });

        customizationToggle.addEventListener('click', () => {
            customizationPanel.classList.toggle('open');
        });

        // Personnalisation
        const primaryColorInput = document.getElementById('primary-color');
        const secondaryColorInput = document.getElementById('secondary-color');
        const fontSizeInput = document.getElementById('font-size');
        const incognitoModeToggle = document.getElementById('incognito-mode');

        primaryColorInput.addEventListener('change', (e) => {
            document.documentElement.style.setProperty('--primary-color', e.target.value);
        });

        secondaryColorInput.addEventListener('change', (e) => {
            document.documentElement.style.setProperty('--secondary-color', e.target.value);
        });

        fontSizeInput.addEventListener('input', (e) => {
            document.body.style.fontSize = `${e.target.value}px`;
        });

        incognitoModeToggle.addEventListener('change', (e) => {
            if (e.target.checked) {
                document.body.classList.add('incognito');
                addMessage("Mode incognito activé. Restez vigilant, camarade!", 'system');
            } else {
                document.body.classList.remove('incognito');
                addMessage("Mode incognito désactivé. Votre présence illumine la résistance!", 'system');
            }
        });

        // Traduction automatique (simulée)
        languageSelect.addEventListener('change', (e) => {
            const newLanguage = e.target.value;
            if (newLanguage !== currentLanguage) {
                currentLanguage = newLanguage;
                addMessage(`Langue changée pour ${getLanguageName(currentLanguage)}. Tous les messages seront traduits.`, 'system');
            }
        });

        function getLanguageName(code) {
            const languages = {
                'fr': 'Français',
                'en': 'Anglais',
                'es': 'Espagnol',
                'de': 'Allemand'
            };
            return languages[code] || code;
        }

        // Easter egg
        let clickCount = 0;
        anarchistMascot.addEventListener('click', () => {
            clickCount++;
            if (clickCount === 5) {
                addMessage("Message secret débloqué : 'La véritable anarchie est l'ordre sans le pouvoir.'", 'system');
                clickCount = 0;
            }
        });

        // Simulation de messages périodiques
        setInterval(() => {
            const messages = [
                "N'oubliez pas : la solidarité est notre force !",
                "Tip du jour : utilisez des mots de passe forts pour protéger vos données.",
                "Question du jour : comment pouvons-nous améliorer notre communauté ?",
                "Rappel : votez sur les propositions en cours !",
                "Nouvelle fonctionnalité : découvrez notre système de réputation décentralisé !"
            ];
            addMessage(messages[Math.floor(Math.random() * messages.length)], 'system');
        }, 60000); // Toutes les minutes

        const submitVoteButton = document.getElementById('submit-vote');
        const voteYesButton = document.getElementById('vote-yes');
        const voteNoButton = document.getElementById('vote-no');

        submitVoteButton.addEventListener('click', () => {
            const selectedOption = document.querySelector('input[name="poll-option"]:checked');
            if (selectedOption) {
                addMessage(`Vous avez voté pour l'option ${parseInt(selectedOption.value) + 1}`, 'system');
                document.getElementById('poll-container').style.display = 'none';
            } else {
                addMessage("Veuillez sélectionner une option avant de voter.", 'system');
            }
        });

        voteYesButton.addEventListener('click', () => submitBanVote('yes'));
        voteNoButton.addEventListener('click', () => submitBanVote('no'));

        function createVoiceChannel(channelName) {
            voiceChannels.push(channelName);
            updateVoiceChannelList();
            addMessage(`Nouveau canal vocal "${channelName}" créé.`, 'system');
        }

        function updateVoiceChannelList() {
            voiceChannelSelect.innerHTML = '<option value="">Sélectionner un canal</option>';
            voiceChannels.forEach(channel => {
                const option = document.createElement('option');
                option.value = channel;
                option.textContent = channel;
                voiceChannelSelect.appendChild(option);
            });
        }

        function joinVoiceChannel(channelName) {
            leaveVoiceChannel();
            currentVoiceChannel = channelName;
            addMessage(`Vous avez rejoint le canal vocal "${channelName}".`, 'system');
            updateVoiceChatParticipants();
        }

        function leaveVoiceChannel() {
            if (currentVoiceChannel) {
                addMessage(`Vous avez quitté le canal vocal "${currentVoiceChannel}".`, 'system');
                currentVoiceChannel = null;
                updateVoiceChatParticipants();
            }
        }

        function updateVoiceChatParticipants() {
            voiceChatParticipants.innerHTML = '';
            if (currentVoiceChannel) {
                const participantElement = document.createElement('div');
                participantElement.textContent = `${username} ${isMuted ? '🔇' : '🔊'}`;
                voiceChatParticipants.appendChild(participantElement);
            }
        }

        // Simulate periodic updates for voice chat
        setInterval(() => {
            if (currentVoiceChannel) {
                const randomEvent = Math.random();
                if (randomEvent < 0.3) {
                    const fakeUser = `User${Math.floor(Math.random() * 100)}`;
                    addMessage(`${fakeUser} a rejoint le canal vocal "${currentVoiceChannel}".`, 'system');
                    updateVoiceChatParticipants();
                } else if (randomEvent < 0.6) {
                    const fakeUser = `User${Math.floor(Math.random() * 100)}`;
                    addMessage(`${fakeUser} a quitté le canal vocal "${currentVoiceChannel}".`, 'system');
                    updateVoiceChatParticipants();
                }
            }
        }, 30000); // Every 30 seconds
    });
    </script>
</body>
</html>